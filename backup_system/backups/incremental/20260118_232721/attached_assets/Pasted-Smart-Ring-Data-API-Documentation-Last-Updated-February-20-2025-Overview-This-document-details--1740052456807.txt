Smart Ring Data API Documentation
Last Updated: February 20, 2025
Overview
This document details the implementation of real-time biometric data integration from Oura Ring and Ultrahuman Ring APIs within the AI-BUDDY wellness platform.
API Integration
Prerequisites
•	Oura Ring API Key (Environment Variable: OURA_API_KEY)
•	Ultrahuman Ring API Key (Environment Variable: ULTRAHUMAN_API_KEY)
Endpoints
Oura Ring API (v2)
Base URL: https://api.ouraring.com/v2/usercollection/
Endpoints used:
1.	Heartrate
GET /heartrate
Parameters:
- start_datetime: ISO timestamp
- end_datetime: ISO timestamp
2.	Daily Readiness
GET /daily_readiness
Parameters:
- start_date: YYYY-MM-DD
- end_date: YYYY-MM-DD
Ultrahuman Ring API
Base URL: https://api.ultrahuman.com/v1/users/me/
Endpoint used:
GET /biometrics/current
Data Structure
Oura Ring Response Format
{
    "data": [
        {
            "bpm": 72,
            "heart_rate_variability": 50,
            "score": 47,
            "temperature_deviation": 36.7
        }
    ]
}
Ultrahuman Ring Response Format
{
    "recovery_score": 66,
    "heart_rate": 74,
    "hrv": 43,
    "temperature": 36.5
}
Implementation Details
Authentication
Both APIs use Bearer token authentication:
headers = {
    'Authorization': f'Bearer {api_key}',
    'Content-Type': 'application/json',
    'Cache-Control': 'no-cache'
}
Metric Mapping
# Oura Ring metrics
data = {
    'heart_rate': heart_metrics.get('bpm'),
    'heart_rate_variability': readiness_metrics.get('heart_rate_variability'),
    'stress_level': readiness_metrics.get('score'),
    'skin_temperature': readiness_metrics.get('temperature_deviation'),
    'timestamp': timestamp,
    'timezone': 'UTC'
}
 
# Ultrahuman Ring metrics
metrics = {
    'recovery_index': data.get('recovery_score'),
    'heart_rate': data.get('heart_rate'),
    'heart_rate_variability': data.get('hrv'),
    'skin_temperature': data.get('temperature'),
    'timestamp': timestamp,
    'timezone': 'UTC'
}
Error Handling
1.	API Key Validation
if not api_key:
    logger.warning("[RING_DATA] API key not found")
    return generate_simulated_data(timestamp)
2.	Request Error Handling
try:
    response = requests.get(url, headers=headers, timeout=10)
    response.raise_for_status()
except requests.exceptions.RequestException as e:
    logger.error(f"[RING_DATA] Error fetching data: {str(e)}")
    return generate_simulated_data(timestamp)
3.	Data Validation
if any(v is not None for v in [data['heart_rate'], 
       data['heart_rate_variability'],
       data['stress_level'], 
       data['skin_temperature']]):
    return data
return generate_simulated_data(timestamp)
Fallback Mechanism
When API data is unavailable, the system generates realistic simulated data:
def generate_simulated_data(timestamp):
    return {
        'heart_rate': round(uniform(65, 75)),
        'heart_rate_variability': round(uniform(40, 50)),
        'stress_level': round(uniform(45, 55)),
        'skin_temperature': round(uniform(36.3, 36.7), 1),
        'timestamp': timestamp,
        'timezone': 'UTC'
    }
Real-time Updates
•	Data is fetched every 30 seconds using JavaScript polling
•	Updates are managed through the /api/ring-data endpoint
•	Loading states are handled in the UI for smooth transitions
Biomarker Analysis
Real-time data is analyzed for:
1.	Heart Rate Variability (HRV) patterns
2.	Stress level correlations
3.	Recovery index trends
4.	Temperature variations
Troubleshooting Guide
Common Issues
1.	Missing Data
•	Verify API keys are properly set in environment variables
•	Check API response logs for error messages
•	Ensure proper timezone handling
2.	Partial Data
•	Verify all required endpoints are accessible
•	Check rate limiting headers
•	Validate data parsing logic
3.	Connection Issues
•	Verify network connectivity
•	Check API service status
•	Validate request headers
Logging
Comprehensive logging is implemented:
logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)
Key log points:
•	API request attempts
•	Response data validation
•	Error conditions
•	Fallback triggers
Testing
Manual Testing Steps
1.	Verify API key configuration
2.	Monitor real-time data updates
3.	Validate metric ranges
4.	Check error handling
5.	Verify fallback mechanism
Automated Checks
•	API response validation
•	Data structure verification
•	Metric range validation
•	Error handling coverage
Future Improvements
1.	Implement rate limiting handling
2.	Add data caching layer
3.	Enhance error recovery
4.	Implement metric averaging
5.	Add historical data analysis
References
•	Oura Ring API Documentation
•	Ultrahuman Ring API Documentation
  

